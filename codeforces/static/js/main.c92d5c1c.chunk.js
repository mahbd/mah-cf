(this.webpackJsonpcf_front=this.webpackJsonpcf_front||[]).push([[0],{52:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(1),c=a(38),s=a.n(c),o=(a(52),a(2)),l=a(5),i=a.n(l),u=a(17),d=a(11),h=a(12),p=a(13),b=a(15),j=a(14),m=a(40),f=a(42),v=a(41),O=a(46),g=a(39),x=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.label,r=e.error,c=e.value,s=e.type,o=e.onChange,l=e.placeholder,i=e.classInput,u=e.classGroup,d=e.passwordClass;return"password"===s&&(i+=d,u=" password-group"),Object(n.jsxs)("div",{className:u,children:[a&&Object(n.jsx)("label",{htmlFor:"{name}",children:a}),Object(n.jsx)("input",{type:s,value:c,onChange:o,id:t,name:t,className:i,autoComplete:"off",placeholder:l,"aria-label":"Search"}),Object(n.jsx)("p",{children:Object(n.jsx)("small",{})}),r&&Object(n.jsx)("div",{className:"alert alert-danger",children:r})]})}}]),a}(r.Component);x.defaultProps={type:"text",classInput:"form-control",classGroup:"form-group",passwordClass:" password-field-minus-titles"};var w=function(e){var t=e.name,a=e.label,c=e.options,s=e.onChange,o=e.multiple,l=void 0!==o&&o,i=e.error,u=e.value;return Object(n.jsxs)(r.Fragment,{children:[Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:t,children:a}),Object(n.jsxs)("select",{"data-live-search":"true",multiple:l,name:t,id:t,value:u,onChange:s,className:"selectpicker form-control AliceBlue",children:[Object(n.jsx)("option",{value:""}),c.map((function(e){return Object(n.jsx)("option",{"data-tokens":e.title,value:e.id,children:e.title},e.id)}))]}),i&&Object(n.jsx)("div",{className:"alert alert-danger",children:i})]}),window.$("#".concat(t)).selectpicker("refresh")&&!1]})},y=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).validate=function(){var t=!1,a={};for(var n in e.schema){var r={name:n,value:e.state.data[n]};a[n]=e.validateProperty(r),a[n]&&(t=!0)}return t?a:null},e.validateProperty=function(t){var a,n=t.name,r=t.value,c=e.schema[n];return c?(a=c.label?c.label:n,c.length&&!Object(g.a)(r,c.length)?"".concat(a," length must be between ").concat(c.length.min," and ").concat(c.length.max||"infinite"):c.email&&!Object(O.a)(r)?"".concat(a," is not a valid Email."):c.alphanumeric&&!Object(m.a)(r)?"".concat(a," can be only letter and number."):c.number&&!Object(v.a)(r)?"".concat(a," should contain only number."):c.alpha&&!Object(f.a)(r)?"".concat(a," should contain only letter."):null):null},e.handleSubmit=function(t){t.preventDefault();var a=e.validate();console.log(a),e.setState({errors:a||{}}),a||e.doSubmit()},e.handleChange=function(t){var a=t.currentTarget,n=Object(u.a)({},e.state.errors),r=e.validateProperty(a);r?n[a.name]=r:delete n[a.name];var c=Object(u.a)({},e.state.data);c[a.name]=a.value,e.setState({data:c,errors:n})},e.handleChangeArray=function(t){for(var a=t.currentTarget,n=a.options,r=[],c=0,s=n.length;c<s;c++)n[c].selected&&r.push(n[c].value);var o={currentTarget:{value:r,name:a.name}};e.handleChange(o)},e}return Object(p.a)(a,[{key:"renderButton",value:function(e){return Object(n.jsx)("button",{disabled:this.validate(),onClick:this.handleSubmit,className:"btn btn-primary",children:e})}},{key:"renderInput",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",r=this.state,c=r.data,s=r.errors;return Object(n.jsx)(x,{name:e,value:c[e],label:t,onChange:this.handleChange,error:s[e],type:a})}},{key:"renderSelect",value:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=this.state,s=c.data,o=c.errors;return Object(n.jsx)(w,{name:e,value:s[e],label:t,options:a,multiple:r,onChange:r?this.handleChangeArray:this.handleChange,error:o[e]})}}]),a}(r.Component),k=a(16),C=a(43),S=a(19),N=a.n(S);N.a.defaults.headers.common["x-auth-token"]=L(),N.a.interceptors.response.use(null,(function(e){return e.response&&e.response.status>=400&&e.response.status<500||(console.log("Logging the error",e),alert("An unexpected error.")),Promise.reject(e)}));var I={get:N.a.get,post:N.a.post,put:N.a.put,delete:N.a.delete},P="https://mah-cf.herokuapp.com/api",_=P+"/login/";function F(){return(F=Object(d.a)(i.a.mark((function e(t,a){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.post(_,{username:t,password:a});case 2:n=e.sent,r=n.data,localStorage.setItem("token",r.jwt);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){localStorage.removeItem("token"),window.location="/login"}function B(){try{var e=localStorage.getItem("token");return Object(C.a)(e)}catch(t){return null}}function L(){return localStorage.getItem("token")}var T={login:function(e,t){return F.apply(this,arguments)},logout:A,loginWithJwt:function(e){localStorage.setItem("token",e)},getCurrentUser:B,getJwt:L},E=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={data:{username:"",password:""},errors:{}},e.schema={username:{label:"Username",length:{max:30,min:3}},password:{label:"Password",length:{max:20,min:6}}},e.doSubmit=Object(d.a)(i.a.mark((function t(){var a,n,r,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=e.state.data,n=a.username,r=a.password,t.next=4,Object(k.trackPromise)(T.login(n,r));case 4:window.location="/",t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),t.t0.response&&400===t.t0.response.status&&((c=Object(u.a)({},e.state.errors)).username=t.t0.response.data.errors,e.setState({errors:c}));case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),e}return Object(p.a)(a,[{key:"render",value:function(){return Object(n.jsx)("div",{className:"container",style:{padding:"100px"},children:Object(n.jsxs)("form",{children:[this.renderInput("username","Username"),this.renderInput("password","Password","password"),this.renderButton("Login")]})})}}]),a}(y),J=a(45),D=a(20),U=function(){var e=Object(r.useState)([]),t=Object(J.a)(e,2),a=t[0],c=t[1];return Object(r.useEffect)((function(){function e(){return(e=Object(d.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.get(P+"/users/?limit=200");case 2:t=e.sent,c(t.data.results);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(n.jsxs)("div",{className:"container p-5",children:[Object(n.jsxs)("table",{className:"table table-bordered",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{scope:"col",children:"Name"}),Object(n.jsx)("th",{scope:"col",children:"CF handle"}),Object(n.jsx)("th",{scope:"col",children:"Batch"})]})}),Object(n.jsx)("tbody",{children:a.map((function(e){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:e.name}),Object(n.jsx)("td",{children:Object(n.jsx)("a",{href:"https://codeforces.com/profile/".concat(e.cf_handle),children:e.cf_handle})}),Object(n.jsx)("td",{children:e.batch}),Object(n.jsx)("td",{style:{border:"0px"},children:Object(n.jsx)(D.b,{to:"/edit/".concat(e.id),className:"btn btn-primary",children:"Edit"})})]},e.id)}))})]}),Object(n.jsx)(D.b,{to:"/edit/new",className:"btn-lg btn-primary",children:"Add new"})]})},G=function(e){Object(b.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={data:{name:"",batch:0,cf_handle:""},errors:{}},e.schema={},e.doSubmit=Object(d.a)(i.a.mark((function t(){var a,n,r,c,s,o,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props.match.params.id,n=e.state.data,r=n.name,c=n.cf_handle,s=n.batch,"new"===a){t.next=14;break}return t.prev=3,t.next=6,Object(k.trackPromise)(I.put("".concat(P,"/users/id=").concat(a,"/"),{name:r,cf_handle:c,batch:s}));case 6:window.location="/",t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),t.t0.response&&400===t.t0.response.status&&(o=Object(u.a)({},t.t0.response.data),e.setState({errors:o}));case 12:t.next=23;break;case 14:return t.prev=14,t.next=17,Object(k.trackPromise)(I.post("".concat(P,"/users/"),{name:r,cf_handle:c,batch:s}));case 17:window.location="/",t.next=23;break;case 20:t.prev=20,t.t1=t.catch(14),t.t1.response&&400===t.t1.response.status&&(l=Object(u.a)({},t.t1.response.data),e.setState({errors:l}));case 23:case"end":return t.stop()}}),t,null,[[3,9],[14,20]])}))),e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(d.a)(i.a.mark((function e(){var t,a,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("new"===(t=this.props.match.params.id)){e.next=14;break}return e.prev=2,e.next=5,Object(k.trackPromise)(I.get("".concat(P,"/users/id=").concat(t)));case 5:a=e.sent,n=a.data,r={name:n.name?n.name:"",batch:n.batch,cf_handle:n.cf_handle?n.cf_handle:""},this.setState({data:r}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(n.jsxs)("div",{className:"container",children:[this.renderInput("name","Name"),this.renderInput("cf_handle","Codeforces Handle"),this.renderInput("batch","Batch","number"),this.renderButton("Save")]})}}]),a}(y),H=function(){var e=Object(k.usePromiseTracker)().promiseInProgress;return Object(n.jsx)("div",{children:e&&Object(n.jsx)("div",{className:"loader",children:"Loading..."})})};var M=function(){return Object(n.jsxs)(r.Fragment,{children:[Object(n.jsx)("div",{className:"container",children:B()&&Object(n.jsxs)("span",{children:[Object(n.jsxs)("h1",{children:["Logged in as: ",B().name," "]}),Object(n.jsx)("button",{className:"btn btn-danger",onClick:A,children:"Logout"})]})}),Object(n.jsx)(H,{}),!B()&&Object(n.jsx)(o.a,{to:"/login"}),Object(n.jsxs)(o.d,{children:[Object(n.jsx)(o.b,{path:"/edit/:id",component:G}),Object(n.jsx)(o.b,{path:"/login",component:E}),Object(n.jsx)(o.b,{path:"/",component:U})]})]})},W=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,80)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))};s.a.render(Object(n.jsx)(D.a,{children:Object(n.jsx)(M,{})}),document.getElementById("root")),W()}},[[79,1,2]]]);
//# sourceMappingURL=main.c92d5c1c.chunk.js.map